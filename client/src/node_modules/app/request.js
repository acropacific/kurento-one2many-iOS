var request = require('popsicle');
var status = require('popsicle-status');

['get', 'post', 'put', 'delete'].forEach(function(method) {
  request[method] = function(url, params) {
    params = params || {};
    params.url = url;
    params.method = method.toUpperCase();
    params.query = params.query || {};
    return request(params).use(status());
  }.bind(request);
});

module.exports = request;
